(this["webpackJsonpforum-frontend"]=this["webpackJsonpforum-frontend"]||[]).push([[0],{36:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a,c=n(1),s=n.n(c),r=n(28),i=n.n(r),o=n(3),l=n(2),u=n(5);n(36);!function(e){e[e.START=0]="START",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(a||(a={}));var d=n(19),j=n(29),b=n(30),O=n(4),h=n.n(O),m=new(function(){function e(){Object(j.a)(this,e),this.baseUrl="/api"}return Object(b.a)(e,[{key:"getHeader",value:function(e){return{headers:{Authorization:"Bearer ".concat(e.token)}}}},{key:"getAnswersByQuestionId",value:function(e){return h.a.get("".concat(this.baseUrl,"/answers/").concat(e))}},{key:"getAnswerById",value:function(e,t){return h.a.get("".concat(this.baseUrl,"/answers/answer/").concat(e),this.getHeader(t))}},{key:"postAnswer",value:function(e,t){return h.a.post("".concat(this.baseUrl,"/answers/answer"),e,this.getHeader(t))}},{key:"putAnswer",value:function(e,t){return h.a.put("".concat(this.baseUrl,"/answers/answer"),e,this.getHeader(t))}},{key:"deleteAnswerById",value:function(e,t){return h.a.delete("".concat(this.baseUrl,"/answers/answer/").concat(e),this.getHeader(t))}},{key:"getCategories",value:function(){return h.a.get("".concat(this.baseUrl,"/categories"))}},{key:"postCategory",value:function(e,t){return h.a.post("".concat(this.baseUrl,"/categories"),e,this.getHeader(t))}},{key:"putCategory",value:function(e,t){return h.a.put("".concat(this.baseUrl,"/categories"),e,this.getHeader(t))}},{key:"deleteCategoryById",value:function(e,t){return h.a.delete("".concat(this.baseUrl,"/categories/").concat(e),this.getHeader(t))}},{key:"getNewestQuestions",value:function(){return h.a.get("".concat(this.baseUrl,"/questions/newest"))}},{key:"getQuestionsByCategoryId",value:function(e){return h.a.get("".concat(this.baseUrl,"/questions/category/").concat(e))}},{key:"getQuestionById",value:function(e){return h.a.get("".concat(this.baseUrl,"/questions/question/").concat(e))}},{key:"getQuestionByUserId",value:function(e,t){return h.a.get("".concat(this.baseUrl,"/questions/user/").concat(e),this.getHeader(t))}},{key:"getAnsweredQuestionsByUserId",value:function(e,t){return h.a.get("".concat(this.baseUrl,"/questions/answeredby/").concat(e),this.getHeader(t))}},{key:"postQuestion",value:function(e,t){return h.a.post("".concat(this.baseUrl,"/questions/question"),e,this.getHeader(t))}},{key:"putQuestion",value:function(e,t){return h.a.put("".concat(this.baseUrl,"/questions/question"),e,this.getHeader(t))}},{key:"deleteQuestionById",value:function(e,t){return h.a.delete("".concat(this.baseUrl,"/questions/question/").concat(e),this.getHeader(t))}},{key:"getAllUsers",value:function(e){return h.a.get("".concat(this.baseUrl,"/users"),this.getHeader(e))}},{key:"getUserById",value:function(e,t){return h.a.get("".concat(this.baseUrl,"/users/").concat(e),this.getHeader(t))}},{key:"registerUser",value:function(e){return h.a.post("".concat(this.baseUrl,"/auth/register"),e)}},{key:"putUser",value:function(e,t){return h.a.put("".concat(this.baseUrl,"/users"),e,this.getHeader(t))}},{key:"deleteUserById",value:function(e,t){return h.a.delete("".concat(this.baseUrl,"/users/").concat(e),this.getHeader(t))}},{key:"login",value:function(e,t){return h.a.post("".concat(this.baseUrl,"/auth/login"),{username:e,password:t})}}]),e}()),x=Object(c.createContext)({}),p=n(0),f=function(){var e=Object(c.useState)(a.START),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)([]),i=Object(l.a)(r,2),o=i[0],u=i[1],j=Object(c.useState)(!1),b=Object(l.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(""),g=Object(l.a)(f,2),v=g[0],N=g[1],y=Object(c.useState)(""),w=Object(l.a)(y,2),S=w[0],C=w[1],I=Object(c.useState)(-1),A=Object(l.a)(I,2),k=A[0],T=A[1],D=Object(c.useState)(""),U=Object(l.a)(D,2),q=U[0],L=U[1],R=Object(c.useState)(""),B=Object(l.a)(R,2),H=B[0],Q=B[1],E=Object(c.useContext)(x);n===a.START&&(s(a.LOADING),m.getCategories().then((function(e){u(e.data)})));return Object(p.jsxs)("form",{className:"form-inline",onSubmit:function(e){return e.preventDefault(),!1},children:[q&&Object(p.jsx)("div",{className:"alert alert-danger w-100",role:"alert",children:q}),H&&Object(p.jsx)("div",{className:"alert alert-success w-100",role:"alert",children:H}),Object(p.jsxs)("div",{className:"w-100 mb-2",children:[Object(p.jsx)("input",{className:"form-control w-50",placeholder:"Name",value:v,onChange:function(e){return N(e.target.value)}}),Object(p.jsx)("button",{className:"btn btn-primary ml-2",type:"button",onClick:function(){v&&m.postCategory({name:v},E).then((function(e){u([e.data].concat(Object(d.a)(o))),Q("Category added"),L(""),N("")})).catch((function(e){L(e.response.data),Q("")}))},disabled:""===v,children:"Add"}),Object(p.jsx)("br",{})]}),Object(p.jsxs)("div",{className:"w-100",children:[!O&&Object(p.jsxs)("select",{className:"form-control w-50",onChange:function(e){T(parseInt(e.target.value))},children:[Object(p.jsx)("option",{value:-1,children:"Choose..."}),o.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),!O&&Object(p.jsx)("button",{className:"btn btn-primary ml-2",type:"button",onClick:function(){-1!==k&&(C(o.find((function(e){return e.id===k})).name),h(!0))},disabled:-1===k,children:"Edit"}),!O&&Object(p.jsx)("button",{className:"btn btn-danger ml-2",type:"button",onClick:function(){-1!==k&&m.deleteCategoryById(k,E).then((function(e){u(o.filter((function(e){return e.id!==k}))),T(-1),Q("Category deleted"),L("")}))},disabled:-1===k,children:"Delete"}),O&&Object(p.jsx)("input",{className:"form-control w-50",placeholder:"Name",value:S,onChange:function(e){return C(e.target.value)}}),O&&Object(p.jsx)("button",{className:"btn btn-primary ml-2",type:"button",onClick:function(){S&&m.putCategory({id:k,name:S},E).then((function(e){h(!1),o[o.findIndex((function(e){return e.id===k}))].name=S,u(Object(d.a)(o)),Q("Category updated"),L("")})).catch((function(e){L(e.response.data),Q("")}))},children:"Save"}),O&&Object(p.jsx)("button",{className:"btn btn-secondary ml-2",type:"button",onClick:function(){C(""),h(!1)},children:"Cancel"})]})]})},g=function(){var e=Object(c.useState)(a.START),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)([]),i=Object(l.a)(r,2),o=i[0],u=i[1],d=Object(c.useState)(-1),j=Object(l.a)(d,2),b=j[0],O=j[1],h=Object(c.useState)(!1),f=Object(l.a)(h,2),g=f[0],v=f[1],N=Object(c.useContext)(x);n===a.START&&(s(a.LOADING),m.getAllUsers(N).then((function(e){u(e.data.filter((function(e){var t;return!(null===(t=e.roles)||void 0===t?void 0:t.find((function(e){return"ROLE_ADMIN"===e.name})))})))})));return Object(p.jsxs)("form",{className:"form-inline",onSubmit:function(e){return e.preventDefault(),!1},children:[g&&Object(p.jsx)("div",{className:"alert alert-success w-100",role:"alert",children:"User deleted;"}),Object(p.jsxs)("div",{className:"w-100",children:[Object(p.jsxs)("select",{className:"form-control w-50",onChange:function(e){O(parseInt(e.target.value))},children:[Object(p.jsx)("option",{value:-1,children:"Choose..."}),o.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.username},e.id)}))]}),Object(p.jsx)("button",{className:"btn btn-danger ml-2",type:"button",onClick:function(){-1!==b&&m.deleteUserById(b,N).then((function(e){u(o.filter((function(e){return e.id!==b}))),O(-1),v(!0)}))},disabled:-1===b,children:"Delete"})]})]})},v=function(){return Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"col-12 col-md-6 w-100",children:[Object(p.jsx)("h1",{className:"text-center",children:"Categories:"}),Object(p.jsx)(f,{})]}),Object(p.jsxs)("div",{className:"col-12 col-md-6",children:[Object(p.jsx)("h1",{className:"text-center",children:"Users:"}),Object(p.jsx)(g,{})]})]})})},N=function(){var e=Object(c.useState)(a.START),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),o=i[0],d=i[1],j=Object(c.useState)(),b=Object(l.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(""),g=Object(l.a)(f,2),v=g[0],N=g[1],y=Object(u.h)(),w=parseInt(y.id),S=Object(u.g)(),C=Object(c.useContext)(x);n===a.START&&(s(a.LOADING),m.getQuestionById(w).then((function(e){h(e.data),s(a.LOADED)})));return Object(p.jsxs)("div",{className:"container mt-3",children:[v&&Object(p.jsx)("div",{className:"alert alert-danger",role:"alert",children:v}),Object(p.jsxs)("div",{className:"p-3 bg-light border border-secondary",children:[Object(p.jsx)("h1",{children:null===O||void 0===O?void 0:O.title}),Object(p.jsx)("p",{children:null===O||void 0===O?void 0:O.description})]}),Object(p.jsx)("textarea",{className:"form-control p-3 mt-3",onChange:function(e){return d(e.target.value)},value:o}),Object(p.jsx)("button",{className:"mt-3 btn btn-primary",onClick:function(){m.postAnswer({questionId:w,text:o,userId:C.id},C).then((function(e){return S.push("/question/".concat(w))})).catch((function(e){N(e.response.data)}))},children:"Post answer"})]})},y=function(e){return Object(p.jsx)("div",{className:"p-3 mt-3 bg-light border border-secondary",children:Object(p.jsx)(o.b,{to:"/question/".concat(e.question.id),children:e.question.title})})},w=function(e){var t,n=Object(c.useState)(a.START),s=Object(l.a)(n,2),r=s[0],i=s[1],d=Object(c.useState)([]),j=Object(l.a)(d,2),b=j[0],O=j[1],h=Object(u.h)(),f=parseInt(h.id),g=Object(c.useContext)(x);return Object(c.useEffect)((function(){i(a.START)}),[h]),r===a.START&&(i(a.LOADING),m.getQuestionsByCategoryId(f).then((function(e){O(e.data),i(a.LOADED)}))),m.getQuestionsByCategoryId(f),Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("h1",{children:null===(t=e.categories.find((function(e){return e.id===f})))||void 0===t?void 0:t.name}),g.id&&Object(p.jsx)(o.b,{to:"/newquestion/".concat(f),className:"btn btn-primary",children:"New question"}),b.map((function(e){return Object(p.jsx)(y,{question:e},"q-".concat(e.id))}))]})},S=function(e){return setTimeout((function(){return e.setUserCtx({})}),0),localStorage.removeItem("userCtx"),Object(p.jsx)(u.a,{to:"/"})},C=function(e){var t,n=Object(c.useContext)(x),a=function(){window.innerWidth<992&&document.querySelector(".navbar-toggler").click()},s=Object(p.jsxs)("li",{className:"nav-item dropdown",children:[Object(p.jsx)("span",{className:"nav-link dropdown-toggle",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Categories"}),Object(p.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:[e.categories.map((function(e){return Object(p.jsx)(o.b,{className:"dropdown-item",to:"/category/".concat(e.id),onClick:a,children:e.name},"cat".concat(e.id))})),Object(p.jsx)("div",{className:"dropdown-divider"}),Object(p.jsx)(o.b,{className:"dropdown-item",to:"/",onClick:a,children:"Newest"})]})]},"catDropdown");return Object(p.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark boxrow header",children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(o.b,{className:"navbar-brand",to:"/",children:"Forum"}),Object(p.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(p.jsx)("span",{className:"navbar-toggler-icon"})}),Object(p.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(p.jsxs)("ul",{className:"navbar-nav ml-auto",children:[(null===(t=n.roles)||void 0===t?void 0:t.find((function(e){return"ROLE_ADMIN"===e})))&&Object(p.jsx)(o.b,{to:"/admin",className:"nav-link",onClick:a,children:"Admin"}),n.id&&Object(p.jsx)(o.b,{to:"/profile",className:"nav-link",onClick:a,children:"Profile"}),s,n.id?Object(p.jsx)(o.b,{to:"/logout",className:"nav-link",onClick:a,children:"Log out"}):Object(p.jsx)(o.b,{to:"/login",className:"nav-link",onClick:a,children:"Log in"})]})})]})})},I=function(){var e=Object(c.useState)(a.START),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),o=i[0],d=i[1],j=Object(c.useState)(),b=Object(l.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(""),g=Object(l.a)(f,2),v=g[0],N=g[1],y=Object(u.h)(),w=parseInt(y.aId),S=parseInt(y.qId),C=Object(u.g)(),I=Object(c.useContext)(x);if(n===a.START){s(a.LOADING);var A=m.getQuestionById(S).then((function(e){h(e.data)})),k=m.getAnswerById(w,I).then((function(e){d(e.data.text)}));Promise.all([A,k]).then((function(){return s(a.LOADED)}))}return Object(p.jsxs)("div",{className:"container mt-3",children:[v&&Object(p.jsx)("div",{className:"alert alert-danger",role:"alert",children:v}),Object(p.jsxs)("div",{className:"p-3 bg-light border border-secondary",children:[Object(p.jsx)("h1",{children:null===O||void 0===O?void 0:O.title}),Object(p.jsx)("p",{children:null===O||void 0===O?void 0:O.description})]}),Object(p.jsx)("textarea",{className:"form-control p-3 mt-3",onChange:function(e){return d(e.target.value)},value:o}),Object(p.jsx)("button",{className:"mt-3 btn btn-primary",onClick:function(){m.putAnswer({id:w,questionId:S,text:o,userId:I.id,time:new Date},I).then((function(e){return C.push("/question/".concat(S))})).catch((function(e){N(e.response.data)}))},children:"Update answer"})]})},A=function(){var e=Object(c.useState)(a.START),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),o=i[0],d=i[1],j=Object(c.useState)(""),b=Object(l.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(""),g=Object(l.a)(f,2),v=g[0],N=g[1],y=Object(c.useState)(""),w=Object(l.a)(y,2),S=w[0],C=w[1],I=Object(c.useState)(""),A=Object(l.a)(I,2),k=A[0],T=A[1],D=Object(c.useState)(""),U=Object(l.a)(D,2),q=U[0],L=U[1],R=Object(u.g)(),B=Object(c.useContext)(x);n===a.START&&(s(a.LOADING),m.getUserById(B.id,B).then((function(e){var t=e.data;d(t.username),h(t.email),s(a.LOADED)})));return Object(p.jsxs)("div",{className:"container py-3",children:[q&&Object(p.jsx)("div",{className:"alert alert-danger",role:"alert",children:q}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"usernameInput",children:"Username"}),Object(p.jsx)("input",{type:"text",className:"form-control",id:"usernameInput","aria-describedby":"usernameHelp",value:o,disabled:!0}),Object(p.jsx)("small",{id:"usernameHelp",className:"form-text text-muted",children:"You can't change your username."})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"emailInput",children:"Email"}),Object(p.jsx)("input",{type:"email",className:"form-control",id:"emailInput",onChange:function(e){return h(e.target.value)},value:O})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"oldPassInput",children:"Old assword"}),Object(p.jsx)("input",{type:"password",className:"form-control",id:"oldPassInput","aria-describedby":"oldPassHelp",onChange:function(e){return N(e.target.value)},value:v}),Object(p.jsx)("small",{id:"oldPassHelp",className:"form-text text-muted",children:"Leave this empty if you don't want to change your password."})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"newPassInput",children:"New password"}),Object(p.jsx)("input",{type:"password",className:"form-control",id:"newPassInput","aria-describedby":"newPassHelp",onChange:function(e){return C(e.target.value)},value:S}),Object(p.jsx)("small",{id:"newPassHelp",className:"form-text text-muted",children:"Leave this empty if you don't want to change your password."})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"newPassConfirmInput",children:"Confirm new password"}),Object(p.jsx)("input",{type:"password",className:"form-control",id:"newPassConfirmInput","aria-describedby":"confirmNewPassHelp",onChange:function(e){return T(e.target.value)},value:k}),Object(p.jsx)("small",{id:"confirmNewPassHelp",className:"form-text text-muted",children:"Leave this empty if you don't want to change your password."})]}),Object(p.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e={id:B.id,email:O,oldPassword:v,newPassword:S,confirmPassword:k};m.putUser(e,B).then((function(e){R.push("/profiel")})).catch((function(e){L(e.response.data)}))},children:"Save"}),Object(p.jsx)("button",{type:"button",className:"btn btn-secondary mx-2",onClick:function(){return R.goBack()},children:"Cancel"}),Object(p.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){window.confirm("Delete your profile?")&&m.deleteUserById(B.id,B).then((function(e){localStorage.removeItem("userCtx"),R.push("/logout")})).catch((function(e){L(e.response.data)}))},children:"Delete profile"})]})},k=function(){var e=Object(c.useState)(a.START),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),o=i[0],d=i[1],j=Object(c.useState)(""),b=Object(l.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(""),g=Object(l.a)(f,2),v=g[0],N=g[1],y=Object(u.h)(),w=parseInt(y.id),S=Object(u.g)(),C=Object(c.useContext)(x);n===a.START&&(s(a.LOADING),m.getQuestionById(w).then((function(e){d(e.data.title),h(e.data.description),s(a.LOADED)})));return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("h1",{children:"New question"}),v&&Object(p.jsx)("div",{className:"alert alert-danger",role:"alert",children:v}),Object(p.jsx)("label",{htmlFor:"title",children:"Title:"}),Object(p.jsx)("input",{className:"form-control mb-3",id:"title",type:"text",onChange:function(e){return d(e.target.value)},value:o}),Object(p.jsx)("label",{htmlFor:"question",children:"Question:"}),Object(p.jsx)("textarea",{className:"form-control mb-3",id:"question",onChange:function(e){return h(e.target.value)},value:O}),Object(p.jsx)("button",{className:"btn btn-primary",onClick:function(){m.putQuestion({id:w,categoryId:w,userId:C.id,title:o,description:O},C).then((function(e){S.push("/question/".concat(w))})).catch((function(e){N(e.response.data)}))},children:"Update question"})]})},T=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),o=i[0],u=i[1],d=Object(c.useState)(!1),j=Object(l.a)(d,2),b=j[0],O=j[1],h=Object(c.useState)(""),x=Object(l.a)(h,2),f=x[0],g=x[1],v=Object(c.useState)(""),N=Object(l.a)(v,2),y=N[0],w=N[1],S=Object(c.useState)(""),C=Object(l.a)(S,2),I=C[0],A=C[1],k=Object(c.useState)(""),T=Object(l.a)(k,2),D=T[0],U=T[1],q=Object(c.useState)(!1),L=Object(l.a)(q,2),R=L[0],B=L[1];return Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"row justify-content-around mt-0 mt-lg-5",children:[Object(p.jsxs)("div",{className:"col-12 col-lg-4 border border-dark rounded mt-2 mt-lg-5",children:[Object(p.jsx)("h1",{className:"text-center",children:"Login"}),b&&Object(p.jsx)("p",{className:"text-danger text-center",children:"Wrong credentials"}),Object(p.jsxs)("form",{children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",placeholder:"Username",onChange:function(e){return s(e.target.value)},value:a})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",onChange:function(e){return u(e.target.value)},value:o})}),Object(p.jsx)("div",{className:"text-center form-group",children:Object(p.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){m.login(a,o).then((function(t){var n={id:t.data.id,token:t.data.token,roles:t.data.roles};localStorage.setItem("userCtx",JSON.stringify(n)),e.setUserCtx(n)})).catch((function(e){O(!0)}))},children:"Login"})})]})]}),Object(p.jsxs)("div",{className:"col-12 col-lg-4 border border-dark rounded mt-2 mt-lg-5",children:[Object(p.jsx)("h1",{className:"text-center",children:"Register"}),R&&Object(p.jsx)("p",{className:"text-success text-center",children:"Successful registration"}),Object(p.jsxs)("form",{children:[D&&Object(p.jsx)("p",{className:"text-danger text-center",children:D}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"email",className:"form-control",placeholder:"Email",onChange:function(e){return g(e.target.value)},value:f})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"text",className:"form-control",placeholder:"Name",onChange:function(e){return w(e.target.value)},value:y})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",onChange:function(e){return A(e.target.value)},value:I})}),Object(p.jsx)("div",{className:"text-center form-group",children:Object(p.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){m.registerUser({username:y,email:f,password:I}).then((function(e){g(""),w(""),A(""),B(!0)})).catch((function(e){U(e.response.data)}))},children:"Register"})})]})]})]})})},D=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(a.START),i=Object(l.a)(r,2),o=i[0],u=i[1];return o===a.START&&(u(a.LOADING),m.getNewestQuestions().then((function(e){var t=e.data;t.time=new Date(t.time),s(e.data)}))),Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("h1",{children:"Newest questions"}),n.map((function(e){return Object(p.jsx)(y,{question:e},"q-".concat(e.id))}))]})},U=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(l.a)(s,2),i=r[0],o=r[1],d=Object(c.useState)(""),j=Object(l.a)(d,2),b=j[0],O=j[1],h=Object(u.h)(),f=parseInt(h.id),g=Object(u.g)(),v=Object(c.useContext)(x);return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("h1",{children:"New question"}),b&&Object(p.jsx)("div",{className:"alert alert-danger",role:"alert",children:b}),Object(p.jsx)("label",{htmlFor:"title",children:"Title:"}),Object(p.jsx)("input",{className:"form-control mb-3",id:"title",type:"text",onChange:function(e){return a(e.target.value)},value:n}),Object(p.jsx)("label",{htmlFor:"question",children:"Question:"}),Object(p.jsx)("textarea",{className:"form-control mb-3",id:"question",onChange:function(e){return o(e.target.value)},value:i}),Object(p.jsx)("button",{className:"btn btn-primary",onClick:function(){m.postQuestion({categoryId:f,userId:v.id,title:n,description:i},v).then((function(e){g.push("/question/".concat(e.data.id))})).catch((function(e){O(e.response.data)}))},children:"Ask question"})]})},q=function(){var e=Object(c.useState)(a.START),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(),i=Object(l.a)(r,2),u=i[0],d=i[1],j=Object(c.useState)([]),b=Object(l.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)([]),g=Object(l.a)(f,2),v=g[0],N=g[1],w=Object(c.useContext)(x);if(n===a.START){s(a.LOADING);var S=m.getUserById(w.id,w).then((function(e){d(e.data)})),C=m.getQuestionByUserId(w.id,w).then((function(e){h(e.data)})),I=m.getAnsweredQuestionsByUserId(w.id,w).then((function(e){N(e.data)}));Promise.all([S,C,I]).then((function(){return s(a.LOADED)}))}return Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"col-12 col-md-6",children:[Object(p.jsx)("h1",{className:"text-center",children:"Your details:"}),Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"col-6 text-right",children:[Object(p.jsx)("p",{children:"Username:"}),Object(p.jsx)("p",{children:"Email:"})]}),Object(p.jsxs)("div",{className:"col-6",children:[Object(p.jsx)("p",{children:null===u||void 0===u?void 0:u.username}),Object(p.jsx)("p",{children:null===u||void 0===u?void 0:u.email})]})]}),Object(p.jsx)("div",{className:"text-center",children:Object(p.jsx)(o.b,{to:"/profile/edit",className:"btn btn-primary",children:"Edit"})})]}),Object(p.jsxs)("div",{className:"col-12 col-md-6",children:[Object(p.jsx)("h1",{className:"text-center",children:"Your questions:"}),Object(p.jsx)("div",{children:O.map((function(e){return Object(p.jsx)(y,{question:e},"q-".concat(e.id))}))}),Object(p.jsx)("h1",{className:"text-center",children:"Questions answered:"}),Object(p.jsx)("div",{children:v.map((function(e){return Object(p.jsx)(y,{question:e},"a-".concat(e.id))}))})]})]})})},L=function(){var e,t=Object(c.useState)(a.START),n=Object(l.a)(t,2),s=n[0],r=n[1],i=Object(c.useState)(),d=Object(l.a)(i,2),j=d[0],b=d[1],O=Object(c.useState)([]),h=Object(l.a)(O,2),f=h[0],g=h[1],v=Object(u.h)(),N=parseInt(v.id),y=Object(c.useContext)(x),w=Object(u.g)();if(s===a.START){r(a.LOADING);var S=m.getQuestionById(N).then((function(e){var t=e.data;t.time=new Date(t.time),b(e.data)})),C=m.getAnswersByQuestionId(N).then((function(e){g(e.data.map((function(e){return e.time=new Date(e.time),e})))}));Promise.all([S,C]).then((function(){return r(a.LOADED)}))}return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsxs)("div",{className:"p-3 my-3 bg-light border border-secondary",children:[Object(p.jsx)("h1",{children:null===j||void 0===j?void 0:j.title}),Object(p.jsx)("p",{children:null===j||void 0===j?void 0:j.description}),Object(p.jsxs)("p",{className:"text-right m-0",children:[null===j||void 0===j?void 0:j.time.toLocaleDateString()," ",null===j||void 0===j?void 0:j.time.toLocaleTimeString()]}),y.id===(null===j||void 0===j?void 0:j.userId)&&Object(p.jsx)(o.b,{to:"/question/".concat(N,"/edit"),className:"btn btn-primary mr-1",children:"Edit"}),(null===(e=y.roles)||void 0===e?void 0:e.find((function(e){return"ROLE_ADMIN"===e})))&&Object(p.jsx)("button",{className:"btn btn-danger",onClick:function(){window.confirm("Delete this question?")&&m.deleteQuestionById(N,y).then((function(e){w.push("/")}))},children:"Delete"})]}),Object(p.jsx)("hr",{}),f.map((function(e){var t;return Object(p.jsxs)("div",{className:"p-3 mt-3 bg-light border border-secondary",children:[Object(p.jsx)("p",{className:"m-0",children:e.text}),Object(p.jsxs)("p",{className:"m-0 text-right",children:[e.time.toLocaleDateString()," ",e.time.toLocaleTimeString()]}),y.id===e.userId&&Object(p.jsx)(o.b,{to:"/question/".concat(N,"/answer/").concat(e.id),className:"btn btn-primary mr-1",children:"Edit"}),(null===(t=y.roles)||void 0===t?void 0:t.find((function(e){return"ROLE_ADMIN"===e})))&&Object(p.jsx)("button",{className:"btn btn-danger",onClick:function(){return t=e,void(window.confirm("Delete answer: ".concat(t.text))&&m.deleteAnswerById(t.id,y).then((function(e){r(a.START)})));var t},children:"Delete"})]},"a-".concat(e.id))})),!f.length&&Object(p.jsx)("h2",{children:"No answers yet."}),y.id&&Object(p.jsx)(o.b,{to:"/answer/".concat(N),className:"mt-3 btn btn-primary",children:"Answer"})]})},R=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(a.START),i=Object(l.a)(r,2),o=i[0],d=i[1],j=Object(c.useState)({}),b=Object(l.a)(j,2),O=b[0],h=b[1];if(o===a.START){var f=localStorage.getItem("userCtx");f&&h(JSON.parse(f)),d(a.LOADING),m.getCategories().then((function(e){s(e.data),d(a.LOADED)}))}return Object(p.jsxs)(x.Provider,{value:O,children:[Object(p.jsx)(C,{categories:n}),Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.b,{exact:!0,path:"/",children:Object(p.jsx)(D,{})}),Object(p.jsx)(u.b,{exact:!0,path:"/question/:id",children:Object(p.jsx)(L,{})}),Object(p.jsx)(u.b,{exact:!0,path:"/question/:id/edit",children:Object(p.jsx)(k,{})}),Object(p.jsx)(u.b,{exact:!0,path:"/question/:qId/answer/:aId",children:Object(p.jsx)(I,{})}),Object(p.jsx)(u.b,{exact:!0,path:"/answer/:id",children:Object(p.jsx)(N,{})}),Object(p.jsx)(u.b,{exact:!0,path:"/category/:id",children:Object(p.jsx)(w,{categories:n})}),Object(p.jsx)(u.b,{exact:!0,path:"/newquestion/:id",children:Object(p.jsx)(U,{})}),Object(p.jsx)(u.b,{exact:!0,path:"/login",children:O.id?Object(p.jsx)(u.a,{to:"/"}):Object(p.jsx)(T,{setUserCtx:h})}),Object(p.jsx)(u.b,{exact:!0,path:"/logout",children:Object(p.jsx)(S,{setUserCtx:h})}),Object(p.jsx)(u.b,{exact:!0,path:"/profile",children:Object(p.jsx)(q,{})}),Object(p.jsx)(u.b,{exact:!0,path:"/profile/edit",children:Object(p.jsx)(A,{})}),Object(p.jsx)(u.b,{exact:!0,path:"/admin",children:Object(p.jsx)(v,{})}),Object(p.jsx)(u.b,{path:"/",children:Object(p.jsx)(u.a,{to:"/"})})]})]})};i.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(o.a,{children:Object(p.jsx)(R,{})})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.e76f6363.chunk.js.map